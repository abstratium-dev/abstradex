<div class="tile" (click)="closeContextMenu()" (dblclick)="onDoubleClick()">
  <div class="tile-header">
    <div class="partner-icon">
      <span class="type-icon-large">{{ getPartnerIcon() }}</span>
    </div>
    <div class="tile-info">
      <h3 class="partner-name">{{ getPartnerName() }}</h3>
      <p class="partner-number">{{ partner.partnerNumber }}</p>
      <p class="partner-address" *ngIf="getPartnerAddress()">
        ğŸ“ {{ getPartnerAddress() }}
      </p>
      <div class="partner-contacts" *ngIf="partner.email || partner.phone || partner.website">
        <p *ngIf="partner.email" class="contact-item">ğŸ“§ {{ partner.email }}</p>
        <p *ngIf="partner.phone" class="contact-item">ğŸ“ {{ partner.phone }}</p>
        <p *ngIf="partner.website" class="contact-item">ğŸŒ {{ partner.website }}</p>
      </div>
      <div class="partner-tags" *ngIf="partner.tags && partner.tags.length > 0">
        <span *ngFor="let tag of partner.tags" 
              class="tag-badge" 
              [style.background-color]="tag.colorHex || '#6c757d'"
              [title]="tag.description || tag.tagName">
          {{ tag.tagName }}
        </span>
      </div>
    </div>
    <div class="tile-actions">
      <span class="status-badge" [class.active]="partner.active" [class.inactive]="!partner.active">
        {{ partner.active ? 'Active' : 'Inactive' }}
      </span>
      <div class="context-menu-wrapper">
        <button class="btn-icon btn-context-menu" 
                (click)="toggleContextMenu($event)" 
                title="More actions">
          â‹®
        </button>
        <div class="context-menu" *ngIf="showContextMenu">
          <button class="context-menu-item" (click)="onViewOverview($event)">
            <span class="menu-icon">ğŸ‘ï¸</span>
            <span>View Overview</span>
          </button>
          <button class="context-menu-item" (click)="onEdit($event)">
            <span class="menu-icon">âœï¸</span>
            <span>Edit Partner</span>
          </button>
          <button class="context-menu-item" (click)="onManageAddresses($event)">
            <span class="menu-icon">ğŸ“</span>
            <span>Manage Addresses</span>
          </button>
          <button class="context-menu-item" (click)="onManageContacts($event)">
            <span class="menu-icon">ğŸ“</span>
            <span>Manage Contacts</span>
          </button>
          <button class="context-menu-item" (click)="onManageTags($event)">
            <span class="menu-icon">ğŸ·ï¸</span>
            <span>Manage Tags</span>
          </button>
          <button class="context-menu-item context-menu-item-danger" (click)="onDelete($event)">
            <span class="menu-icon">ğŸ—‘ï¸</span>
            <span>Delete Partner</span>
          </button>
        </div>
      </div>
    </div>
  </div>
  <div class="tile-body" *ngIf="partner.notes || partner.createdAt">
    <p *ngIf="partner.notes" class="notes">{{ partner.notes }}</p>
    <p *ngIf="partner.createdAt" class="metadata">
      Created: {{ formatDate(partner.createdAt) }}
    </p>
  </div>
</div>
